{% macro render_card(post) %}
<div class="grid-item" data-post-id="{{ post.id }}" data-medium="{{ post.medium }}">
    <div class="card-wrapper" onclick="openPost('{{ post.id }}')">
        <div class="card card-{{ post.medium|lower }}"
            data-content="{{ post.cleaned_content|e }}"
            data-date="{{ post.date.strftime('%B %-d, %Y') if post.date else '' }}"
            data-location="{{ post.location1 }}{% if post.location2 %}, {{ post.location2 }}{% endif %}">
            <!-- Front of card (theme-based background from CSS, or dynamic gradient for atelier) -->
            <div class="card-face card-front">
                <div class="card-content">
                    <h3 class="card-title">{{ post.title or 'Untitled' }}</h3>
                    <div class="card-meta">
                        <span class="card-date">{{ post.date.strftime('%Y-%m-%d') if post.date else '' }}</span>
                        <span class="card-category card-medium card-medium-{{ post.medium }}">{{ post.medium|capitalize }}</span>
                    </div>
                </div>
            </div>
            <!-- Back of card (shows title, date, and category/medium) -->
            <div class="card-face card-back card-back-{{ post.medium|lower }}">
                <div class="card-content">
                    <h3 class="card-title">{{ post.title or 'Untitled' }}</h3>
                    <div class="card-meta">
                        <span class="card-date">{{ post.date.strftime('%Y-%m-%d') if post.date else '' }}</span>
                        <span class="card-category card-medium card-medium-{{ post.medium }}">{{ post.medium|capitalize }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endmacro %}
